cards_prep:
  handler: similarity.get_embeddings
  memorySize: 10000
  timeout: 900
  maximumRetryAttempts: 0
  layers:
    - ${cf:magicml-data_prep-${self:custom.stage}.PythonRequirementsLambdaLayerQualifiedArn}
    - {Ref: PythonRequirementsLambdaLayer}
  events:
    - http:
        path: get_embeddings
        method: get
        cors: true
        authorizer: aws_iam
  fileSystemConfig:
    localMountPath: '/mnt${self:custom.data_prep_mnt_path}'
    arn: ${cf:magicml-common-${self:custom.stage}.accessPointAArn}